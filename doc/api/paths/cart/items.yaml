post:
  tags:
    - Cart
  summary: カートに商品を追加
  description: |
    カートに商品を追加します。既に同じSKUが存在する場合は数量が加算されます。
  operationId: addToCart
  security:
    - bearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/cart.yaml#/AddToCartRequest'
  responses:
    '200':
      description: カートに追加成功
      content:
        application/json:
          schema:
            $ref: '../../components/schemas/cart.yaml#/Cart'
    '400':
      $ref: '../../components/responses/common.yaml#/BadRequest'
    '401':
      $ref: '../../components/responses/common.yaml#/Unauthorized'
    '409':
      description: 在庫不足
      content:
        application/json:
          schema:
            $ref: '../../components/schemas/common/error-response.yaml#/ErrorResponse'
          example:
            code: "INSUFFICIENT_STOCK"
            message: "在庫が不足しています"
            timestamp: "2025-11-12T10:30:00Z"
            path: "/v1/cart/items"
            details:
              - field: "skuId"
                message: "SKU 'SKU-JACKET-M-BLACK' の在庫が不足しています"
                code: "INSUFFICIENT_STOCK"
    '500':
      $ref: '../../components/responses/common.yaml#/InternalServerError'
